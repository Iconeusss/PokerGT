@import "../../variables.less";

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body,
#root {
  margin: 0;
  padding: 0;
  width: 100%;
  min-height: 100vh;
  overflow-x: hidden; 
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

.game-container-gd {
  min-height: 100vh;
  width: 100%;
  background: radial-gradient(
    circle at center,
    @color-background-gd-light 0%,
    @color-background-gd 100%
  );
  padding: 1rem;
  color: @color-text-light;
  display: flex;
  flex-direction: column;
}

.game-wrapper {
  max-width: 100vw;
  margin: 0 auto;
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
}

// æ ‡é¢˜
.game-title {
  font-size: 3rem;
  font-weight: 800;
  color: #fbbf24; // é‡‘è‰²æ ‡é¢˜
  text-align: center;
  margin-bottom: 0.5rem;
  text-shadow: @shadow-text;
  letter-spacing: 2px;
}

// è§„åˆ™æŒ‰é’®
.btn-rules {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 100;
  background: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: bold;
  backdrop-filter: blur(4px);
  transition: all 0.3s;

  &:hover {
    background: rgba(0, 0, 0, 0.6);
    transform: scale(1.05);
  }

  .icon {
    font-size: 1.2rem;
  }
}

// è§„åˆ™å°æŒ‰é’® (æ¸¸æˆä¸­)
.btn-rules-icon {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 100;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #fff;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.2rem;
  backdrop-filter: blur(4px);
  transition: all 0.3s;

  &:hover {
    background: rgba(0, 0, 0, 0.5);
    transform: scale(1.1);
  }
}

// æ¨¡æ€æ¡†
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(5px);
}

.modal-content {
  background: #1f2937;
  border: 1px solid #374151;
  border-radius: 1rem;
  padding: 2rem;
  max-width: 600px;
  width: 90%;
  color: #f3f4f6;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
  animation: modal-pop 0.3s cubic-bezier(0.16, 1, 0.3, 1);

  .modal-title {
    margin-top: 0;
    color: #fbbf24;
    text-align: center;
    border-bottom: 1px solid #374151;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
  }

  .modal-body {
    line-height: 1.6;
    margin-bottom: 1.5rem;

    p {
      margin-bottom: 0.5rem;
    }
    ul {
      padding-left: 1.5rem;
      margin-bottom: 0.5rem;
    }
    li {
      margin-bottom: 0.25rem;
    }

    .rule-list {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      max-height: 60vh;
      overflow-y: auto;
      padding-right: 0.5rem;

      // éšè—æ»šåŠ¨æ¡
      &::-webkit-scrollbar {
        display: none;
      }
      scrollbar-width: none; // Firefox
      -ms-overflow-style: none; // IE 10+

      .rule-title {
        font-size: 1.2rem;
        font-weight: bold;
        color: #fbbf24;
        margin-bottom: 0.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .rule-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.25rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);

        &:last-child {
          border-bottom: none;
        }

        &.align-top {
          align-items: flex-start;

          .rule-label {
            margin-top: 0.3rem;
          }
        }

        .rule-label {
          font-weight: bold;
          min-width: 5rem;
          color: #e5e7eb;
          text-align: right;
        }

        .rule-cards {
          display: flex;
          gap: 0.25rem;
          flex-wrap: wrap;
          align-items: center;

          &.column-layout {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
          }

          .card-row {
            display: flex;
            gap: 0.25rem;
          }

          .rule-hint {
            font-size: 0.85rem;
            color: #ccc;
          }

          .rule-desc {
            text-align: left;
            width: 100%;
          }

          &.text-left {
            text-align: left;
          }
        }
      }
    }
  }

  .close-btn {
    width: 100px;
    margin-top: 1rem;
  }
}

@keyframes modal-pop {
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

// èƒœåˆ©å‘¼å¸åŠ¨ç”» - æ”¾å¤§ç¼©å°æ•ˆæœ
@keyframes winner-breathing {
  0%,
  100% {
    transform: scale(1);
    box-shadow:
      0 0 20px rgba(251, 191, 36, 0.8),
      0 0 40px rgba(251, 191, 36, 0.4);
  }
  50% {
    transform: scale(1.05);
    box-shadow:
      0 0 30px rgba(251, 191, 36, 1),
      0 0 60px rgba(251, 191, 36, 0.6);
  }
}

// å¥–æ¯å¼¹è·³åŠ¨ç”»
@keyframes trophy-bounce {
  0%,
  100% {
    transform: translateX(-50%) translateY(0);
  }
  50% {
    transform: translateX(-50%) translateY(-5px);
  }
}

// èƒœåˆ©è„‰å†²åŠ¨ç”»
@keyframes winner-pulse {
  0%,
  100% {
    box-shadow: 0 0 18px rgba(250, 204, 21, 0.9);
  }
  50% {
    box-shadow: 0 0 30px rgba(250, 204, 21, 1);
  }
}

// æ¶ˆæ¯æ¡† (Toast é£æ ¼)
.message-box {
  position: fixed;
  top: 64%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 50;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 2rem;
  padding: 0.75rem 2rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  pointer-events: none; // å…è®¸ç‚¹å‡»ç©¿é€
  text-align: center;
  transition: all 0.3s ease;
  min-width: 200px;

  .message-text {
    font-size: clamp(1rem, 3vw, 2rem);
    font-weight: 600;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    margin: 0;
  }
}

// æŒ‰é’®ç»„
.button-group {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1rem;

  &.top-right {
    position: absolute;
    top: 1rem;
    right: 1rem;
    margin: 0;
    z-index: 100;
  }

  &.top-left {
    position: absolute;
    top: 1rem;
    left: 1rem;
    margin: 0;
    z-index: 100;
    flex-direction: column; 
  }
}

// æŒ‰é’®æ ·å¼
.btn {
  padding: 0.6rem 2rem;
  border-radius: 2rem; // åœ†è§’æŒ‰é’®
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: all @transition-fast;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  top: 0;

  &:active {
    top: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  &:disabled {
    background: #4b5563 !important;
    color: #9ca3af !important;
    cursor: not-allowed;
    box-shadow: none;
    top: 0;
  }

  &.btn-primary {
    background: linear-gradient(to bottom, #3b82f6, #2563eb);
    color: white;
    border-bottom: 3px solid #1d4ed8;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-landlord {
    background: linear-gradient(to bottom, #f59e0b, #d97706);
    color: white;
    font-size: 1.25rem;
    padding: 0.75rem 2.5rem;
    border-bottom: 3px solid #b45309;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-pass {
    background: linear-gradient(to bottom, #6b7280, #4b5563);
    color: white;
    font-size: 1.25rem;
    padding: 0.75rem 2.5rem;
    border-bottom: 3px solid #374151;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-play {
    background: linear-gradient(to bottom, #22c55e, #16a34a);
    color: white;
    border-bottom: 3px solid #15803d;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-pass-card {
    background: linear-gradient(to bottom, #ea580c, #fe4406);
    color: white;
    border-bottom: 3px solid #c2410c;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-home {
    background: transparent;
    color: #1f2937;
    border-bottom: none;
    box-shadow: none;
    z-index: 1;

    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background: white;
      border-radius: 2rem;
      z-index: -1;
    }

    &::after {
      content: "";
      position: absolute;
      inset: 0;
      bottom: -3px;
      background: linear-gradient(135deg, #fee2e2, #dcfce7, #dbeafe);
      border-radius: 2rem;
      z-index: -2;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    &:active {
      top: 2px;
      &::after {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }
    }

    &:hover:not(:disabled) {
      filter: brightness(0.98);
    }
  }
}

.base-cards-section {
  display: flex;
  justify-content: center;
  margin-bottom: 1rem;
}

.base-cards-panel {
  background: rgba(0, 0, 0, 0.3);
  border-radius: @border-radius-large;
  padding: 0.75rem 1.5rem;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);

  .panel-title {
    font-weight: bold;
    color: #fbbf24;
    margin-bottom: 0.5rem;
    text-align: center;
    font-size: 1rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  .base-cards-container {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
  }

  .card-placeholder {
    width: @card-width-small;
    height: @card-height-small;
    border-radius: @border-radius;
    border: 2px dashed rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
  }

  .card {
    width: @card-width-small;
    height: @card-height-small;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.2rem;
      }
      .card-suit {
        font-size: 0.8rem;
      }
    }
    .joker-main-symbol {
      font-size: 0.8rem !important;
    }
    .joker-text {
      font-size: 0.5rem !important;
      line-height: 0.5rem !important;
    }
  }
}

.game-area {
  position: relative;
  display: flex;
  align-items: center; 
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 0;
  width: 100%;
  flex: 1;

  @media (max-width: 768px) {
    flex-direction: row; 
    flex-wrap: nowrap; 
    align-items: center;
    justify-content: space-between;
    gap: 0.25rem;
  }
}

// ä¾§è¾¹ç©å®¶
.side-player {
  flex: 0 0 140px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  &.left {
    order: 1;
    @media (max-width: 768px) {
      order: 1;
      flex: 0 0 auto; 
      width: 25%; 
      max-width: 90px;
      padding: 0;
      flex-direction: column; 
      margin-bottom: 0;
    }
  }

  &.right {
    order: 3;
    @media (max-width: 768px) {
      order: 3; // åœ¨å³ä¾§
      flex: 0 0 auto;
      width: 25%;
      max-width: 90px;
      padding: 0;
      flex-direction: column;
      margin-bottom: 0;
    }
  }

  @media (max-width: 768px) {
    width: auto;
    margin-bottom: 0;
  }
}

.center-area {
  flex: 1;
  min-width: 0;
  z-index: 1;
  order: 2;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;
  // border: 3px solid darkgray;

  @media (max-width: 768px) {
    order: 2; 
    flex: 1; 
    width: auto;
    justify-content: center;
    padding-top: 0;
    margin: 0 0.25rem;
  }
}

.top-player {
  position: absolute;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(260px, 90%);
  z-index: 10;
}

// ç‰Œæ¡ŒåŒºåŸŸ (å‡ºç‰Œå±•ç¤º)
.table-area {
  // ç§»é™¤èƒŒæ™¯ï¼Œè®©ç‰Œçœ‹èµ·æ¥åœ¨æ¡Œé¢ä¸Š
  background: transparent;
  border-radius: @border-radius-large;
  padding: 1rem;
  box-shadow: none;
  min-height: 12rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;

  .table-header {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .table-info-badge {
    background: rgba(0, 0, 0, 0.4);
    padding: 0.3rem 0.8rem;
    border-radius: 1rem;
    color: #facc15;
    font-size: 0.9rem;
    font-weight: bold;
    border: 1px solid rgba(250, 204, 21, 0.3);
    backdrop-filter: blur(2px);
  }

  .table-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    width: 100%;
  }

  .played-by-tag {
    background: rgba(0, 0, 0, 0.3);
    color: #e5e7eb;
    font-size: 0.85rem;
    padding: 0.2rem 0.6rem;
    border-radius: 0.5rem;
  }

  @keyframes pulse-winner {
    0% {
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
    }
    50% {
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.9);
    }
    100% {
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
    }
  }

  .table-title {
    display: none; 
  }

  .table-info {
    display: none; 
  }

  .table-cards {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    gap: 0;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.05); // å¾®å¾®å‘äº®çš„åŒºåŸŸè¡¨ç¤ºå‡ºç‰ŒåŒº
    border-radius: 1rem;
    border: 1px dashed rgba(255, 255, 255, 0.1);

    // å¯ç”¨å®¹å™¨æŸ¥è¯¢ï¼Œä½¿å¡ç‰Œéšçˆ¶å®¹å™¨å®½åº¦ç¼©æ”¾
    container-type: inline-size;
    width: 90%;

    @media (max-width: 768px) {
      width: 90%;
      margin-left: 0;
    }

    // åŠ¨æ€æ¯”ä¾‹
    --card-scale: 1;
    &.scale-large {
      --card-scale: 1.35;
    }
    &.scale-medium {
      --card-scale: 1;
    }
    &.scale-small {
      --card-scale: 0.75;
    }

    .table-card-wrapper {
      margin-left: -2.5rem;
      display: flex; // Ensure it behaves as a container for the card
      flex-shrink: 0;

      &:first-child {
        margin-left: 0;
      }

      @media (max-width: 768px) {
        margin-left: -1.8rem;
      }
    }

    .card {
      // å¯ç”¨å®¹å™¨æŸ¥è¯¢ï¼Œä½¿å†…éƒ¨å…ƒç´ éšå¡ç‰Œè‡ªèº«å®½åº¦ç¼©æ”¾
      container-type: inline-size;

      // å®šä¹‰è®¡ç®—åçš„å®é™…å®½åº¦å˜é‡
      // å®½åº¦è®¡ç®—ï¼šå®¹å™¨å®½åº¦çš„ 12% * ç¼©æ”¾ç³»æ•°
      // é™åˆ¶ï¼šæœ€å° 3.25rem (ä¿è¯é«˜åº¦>4.5rem)ï¼Œæœ€å¤§ 5rem
      // ä½¿ç”¨ ~"" é¿å… Less ç¼–è¯‘é”™è¯¯
      --final-width: clamp(3.25rem, calc(~"12cqw * var(--card-scale)"), 5rem);

      width: var(--final-width);

      // ä¿æŒ 5:7 çš„å®½é«˜æ¯”
      height: auto;
      aspect-ratio: 5 / 7;
      min-height: 4.5rem;
      max-height: 7rem;

      // è‡ªèº«å±æ€§å¿…é¡»ä½¿ç”¨å˜é‡è®¡ç®— (å› ä¸º cqw æ­¤æ—¶æŒ‡å‘çˆ¶å®¹å™¨)
      // ç³»æ•° = åŸæ•°å€¼ / 12

      border-radius: calc(~"var(--final-width) * 0.1"); // 1.2 / 12
      border-width: calc(~"var(--final-width) * 0.0167"); // 0.2 / 12

      // margin ä¹Ÿè·Ÿéšå¡ç‰Œå°ºå¯¸ç¼©æ”¾ (ä¸Šä¸‹å³ä¿ç•™ï¼Œå·¦è¾¹æ”¹ä¸ºè´Ÿè¾¹è·å®ç°é‡å )
      margin-top: calc(~"var(--final-width) * 0.0167");
      margin-bottom: calc(~"var(--final-width) * 0.0167");
      margin-right: 0 !important;
      margin-left: 0 !important;

      padding: calc(~"var(--final-width) * 0.05"); // 0.6 / 12

      // ç»Ÿä¸€ä½¿ç”¨å·¦ä¾§é˜´å½±ä»¥å¢å¼ºé‡å æ—¶çš„å±‚æ¬¡æ„Ÿï¼Œä¸æ‰‹ç‰Œä¿æŒä¸€è‡´
      box-shadow: -2px 0 4px rgba(0, 0, 0, 0.3);

      // å†…éƒ¨å­å…ƒç´ å¯ä»¥ä½¿ç”¨ cqw (ç›¸å¯¹äº .card è‡ªèº«)
      // æ•°å€¼ = (åŸæ•°å€¼ / 12) * 100
      .card-top-left {
        top: 4.16cqw; // 0.5 / 12
        left: 4.16cqw;
        width: 30cqw; // 3.6 / 12

        .card-rank {
          font-size: 40cqw;
        } // 4.8 / 12
        .card-suit {
          font-size: 35.83cqw;
        } // 4.3 / 12
      }

      .card-bottom-right {
        bottom: 4.16cqw;
        right: 4.16cqw;

        .card-rank {
          font-size: 40cqw;
        }
        .card-suit {
          font-size: 35.83cqw;
        }
      }

      // Joker ç‰¹æ®Šå¤„ç†
      &.joker-card {
        .joker-text {
          font-size: 14.16cqw; // 1.7 / 12
          line-height: 14.16cqw;
        }
        .joker-main-symbol {
          font-size: 70cqw; // 8.4 / 12
        }
      }
    }
  }

  .table-empty {
    color: rgba(255, 255, 255, 0.3);
    text-align: center;
    padding: 2rem 0;
    font-size: 1.125rem;
    font-style: italic;
  }
}

// ç©å®¶æ‰‹ç‰ŒåŒºåŸŸ
.player-hand {
  // ç§»é™¤æ‰‹ç‰ŒåŒºåŸŸæ¸å˜èƒŒæ™¯ï¼Œæ”¹ä¸ºç»Ÿä¸€çš„åŠé€æ˜èƒŒæ™¯
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(8px);
  border-radius: 1rem;
  padding: 1.5rem 1rem 0.5rem 1rem;
  box-shadow: none;
  position: sticky;
  bottom: 0;
  width: 100%;
  margin-top: auto; // æ¨åˆ°åº•éƒ¨
  border: 2px solid rgba(255, 255, 255, 0.1); // åŸºç¡€è¾¹æ¡†

  &.landlord {
    border-color: #ef4444; // çº¢è‰²è¾¹æ¡†
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.5); // çº¢è‰²å…‰æ™•

    &::after {
      content: "ğŸ‘‘";
      position: absolute;
      top: -28px;
      right: -18px;
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    }
  }

  &.active {
    border-color: #f9fafb;
    box-shadow: 0 0 18px rgba(255, 255, 255, 0.9);
  }

  &.game-winner {
    border-color: #fbbf24 !important;
    box-shadow:
      0 0 20px rgba(251, 191, 36, 0.8),
      0 0 40px rgba(251, 191, 36, 0.4),
      inset 0 0 10px rgba(251, 191, 36, 0.2);
    animation: winner-breathing 2s ease-in-out infinite;
    background: linear-gradient(
      135deg,
      rgba(251, 191, 36, 0.1) 0%,
      rgba(0, 0, 0, 0.6) 50%,
      rgba(251, 191, 36, 0.1) 100%
    );
    z-index: 100;
    transition: all 0.5s ease;

    &::before {
      content: "ğŸ†";
      position: absolute;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
      animation: trophy-bounce 1s ease-in-out infinite;
    }
  }

  .hand-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;

    .hand-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;

      button {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.15);
        color: #fff;
        border-radius: 0.75rem;
        padding: 0.35rem 0.7rem;
        font-weight: 700;
        cursor: pointer;
        transition:
          transform 0.18s ease,
          background 0.18s ease,
          border-color 0.18s ease,
          box-shadow 0.18s ease;

        &:hover {
          background: rgba(0, 0, 0, 0.45);
          border-color: rgba(255, 255, 255, 0.22);
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.12);
        }

        &:active {
          transform: scale(0.98);
        }
      }

      .btn-sort-mode {
        width: 3.4rem;
        height: 2.4rem;
        // padding: 0 1rem;
        border-radius: 1rem !important;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .sort-direction-toggle {
        width: 2.4rem;
        height: 2.4rem;
        padding: 0;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .sort-arrow {
        display: inline-block;
        font-size: 1.15rem;
        transition: transform 0.28s cubic-bezier(0.2, 0.9, 0.2, 1);
        will-change: transform;
      }

      .sort-direction-toggle.is-default .sort-arrow {
        transform: rotate(180deg);
      }

      .sort-direction-toggle.is-reversed .sort-arrow {
        transform: rotate(0deg);
      }
    }

    .hand-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
      margin: 0;
      display: flex;
      align-items: center;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      white-space: nowrap;
      height: 3rem;

      .player-stats-inline {
        margin-left: 0.8rem;
        font-size: 0.8em;
        color: #9ca3af;
        font-weight: normal;
        background: rgba(0, 0, 0, 0.3);
        padding: 0.1rem 0.5rem;
        border-radius: 0.5rem;
        vertical-align: middle;
      }
    }

    .button-group {
      margin-bottom: 0;
    }
  }

  .hand-cards-scroll-container {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 0.5rem;
    -webkit-overflow-scrolling: touch;

    &::-webkit-scrollbar {
      height: 6px;
    }
    &::-webkit-scrollbar-track {
      background: transparent;
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      &:hover {
        background: rgba(255, 255, 255, 0.5);
      }
    }
  }

  .hand-cards {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    align-items: center;
    padding-top: 2rem; // å¢åŠ é¡¶éƒ¨å†…è¾¹è·ï¼Œé˜²æ­¢é€‰ä¸­å¡ç‰Œä¸Šæµ®è¢«é®æŒ¡
    min-height: 9rem;
    padding-bottom: 1rem;
    width: max-content;
    min-width: 100%;

    .card-motion {
      display: inline-flex;
      margin: 0;
      margin-left: -2.5rem; // è°ƒæ•´è´Ÿè¾¹è·ï¼Œç¡®ä¿å†…å®¹å¯è§
      will-change: transform;

      &:first-child {
        margin-left: 0;
      }

      @media (max-width: 768px) {
        margin-left: -1.8rem;
      }

      @media (max-width: 500px) {
        margin-left: -1.8rem;

        &:first-child {
          margin-left: 0;
        }
      }
    }

    .card {
      margin: 0;
      box-shadow: -2px 0 4px rgba(0, 0, 0, 0.3); // åŠ æ·±é˜´å½±
      transition:
        transform 0.3s cubic-bezier(0.33, 1, 0.68, 1),
        margin 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s ease;

      // å®šä¹‰é€‰ä¸­çŠ¶æ€ä½ç§»å˜é‡
      --selected-offset: -1.5rem;

      // æ‚¬åœæ•ˆæœ (ä»…åœ¨æ”¯æŒæ‚¬åœçš„è®¾å¤‡ä¸Šå¯ç”¨)
      @media (hover: hover) {
        &:hover {
          transform: translateY(-1rem);
          box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
          // z-index: 100;
        }
      }

      // é€‰ä¸­çŠ¶æ€
      &.selected {
        transform: translateY(var(--selected-offset));
        box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); // é‡‘è‰²å…‰æ™•
        border-color: #fbbf24;
      }

      // é€‰ä¸­ä¸”æ‚¬åœ 
      @media (hover: hover) {
        &.selected:hover {
          transform: translateY(var(--selected-offset));
        }
      }

      @media (max-width: 768px) {
        margin-left: 0;
      }

      // è¶…å°å±å¹•
      @media (max-width: 500px) {
        margin-left: 0; 
        --selected-offset: -0.8rem; 

        &.selected {
          box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); 
        }
      }

      // è§¦æ‘¸è®¾å¤‡
      @media (hover: none), (pointer: coarse) {
        &:hover {
          transform: translateY(0); 
          box-shadow: -2px 0 4px rgba(0, 0, 0, 0.3); 
        }

        &.selected:hover {
          transform: translateY(var(--selected-offset)); 
          box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); 
        }
      }
    }
  }
}

@keyframes winner-pulse {
  0% {
    transform: translateY(0) scale(1);
    box-shadow: 0 0 12px rgba(250, 204, 21, 0.6);
  }
  50% {
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 0 22px rgba(250, 204, 21, 1);
  }
  100% {
    transform: translateY(0) scale(1);
    box-shadow: 0 0 12px rgba(250, 204, 21, 0.6);
  }
}

// ç§¯åˆ†è¡¨
.scoreboard-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  z-index: 2000;
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(8px);

  .modal-content {
    background: linear-gradient(135deg, #2e1065 0%, #4c1d95 100%);
    width: 90%;
    max-width: 800px;
    border-radius: 1.5rem;
    padding: 2rem;
    position: relative;
    border: 2px solid rgba(167, 139, 250, 0.3);
    box-shadow:
      0 20px 50px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(255, 255, 255, 0.1) inset;
    animation: modal-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    display: flex;
    flex-direction: column;
    max-height: 90vh;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 1rem;

    h2 {
      margin: 0;
      color: #fff;
      font-size: 1.8rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
  }

  .score-table-container {
    overflow-x: auto;
    margin-bottom: 1.5rem;
    border-radius: 0.5rem;
    background: rgba(0, 0, 0, 0.3);
    padding: 1rem;

    table {
      width: 100%;
      border-collapse: collapse;
      color: #fff;
      min-width: 600px;

      th,
      td {
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 0.75rem 1rem;
        text-align: center;
        white-space: nowrap;
      }

      th {
        background: rgba(139, 92, 246, 0.3);
        font-weight: bold;
        color: #ddd6fe;
      }

      td {
        font-family: monospace;
        font-size: 1.1rem;
      }

      // ç¬¬ä¸€åˆ—æ ·å¼ (æ ‡é¢˜åˆ—)
      tr td:first-child {
        background: rgba(0, 0, 0, 0.4);
        font-weight: bold;
        color: #f3f4f6;
        position: sticky;
        left: 0;
        z-index: 10;
      }

      tr th:first-child {
        position: sticky;
        left: 0;
        z-index: 10;
        background: rgba(109, 40, 217, 0.9); // darker purple
      }
    }
  }

  .close-btn {
    align-self: center;
    padding: 0.4rem 1.2rem;
    font-size: 1rem;
    white-space: nowrap;
  }
}

// å¡ç‰Œæ ·å¼
.card {
  position: relative;
  display: inline-block;
  width: @card-width;
  height: @card-height;
  border-radius: @border-radius;
  border: 1px solid #d1d5db; // æ›´ç»†çš„è¾¹æ¡†
  margin: 0.125rem;
  transition: all @transition-fast;
  flex-shrink: 0; // é˜²æ­¢å¡ç‰Œåœ¨ç©ºé—´ä¸è¶³æ—¶å˜å½¢

  // ç»Ÿä¸€é£æ ¼
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  padding: 0.25rem;
  background: @color-card-bg;
  box-shadow: @shadow-card;
  font-weight: bold;
  cursor: default;
  user-select: none; // ç¦æ­¢æ–‡æœ¬é€‰ä¸­
  -webkit-user-select: none; // Safari/Chromeå…¼å®¹
  touch-action: none; // é˜²æ­¢è§¦æ‘¸æ»šåŠ¨

  // å†…éƒ¨å…ƒç´ æ ·å¼
  .card-top-left {
    position: absolute;
    top: 0.2rem;
    left: 0.2rem;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 1.5rem;

    @media (max-width: 500px) {
      width: 1rem;
    }

    .card-rank {
      font-size: 2rem;
      line-height: 1;
      font-family: "Times New Roman", serif; // æ›´æœ‰æ‰‘å…‹æ„Ÿ

      @media (max-width: 500px) {
        font-size: 1.2rem;
      }
    }
    .card-suit {
      font-size: 1.8rem;
      line-height: 1;

      @media (max-width: 500px) {
        font-size: 0.8rem;
      }
    }
  }

  .card-bottom-right {
    position: absolute;
    bottom: 0.2rem;
    right: 0.2rem;
    transform: rotate(180deg);
    display: flex;
    flex-direction: column;
    align-items: flex-start;

    @media (max-width: 500px) {
      bottom: 0.1rem;
      right: 0.1rem;
    }

    .card-rank {
      font-size: 2rem;
      line-height: 1;
      font-family: "Times New Roman", serif;

      @media (max-width: 500px) {
        font-size: 1.2rem;
      }
    }
    .card-suit {
      font-size: 1.8rem;
      line-height: 1;

      @media (max-width: 500px) {
        font-size: 0.8rem;
      }
    }
  }

  // Mini card style for rules
  &.mini {
    width: 2.5rem;
    height: 3.5rem;
    border-radius: 0.25rem;
    padding: 0.1rem;
    margin: 0.1rem;
    border-width: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);

    .card-top-left {
      width: 0.8rem;
      top: 0.1rem;
      left: 0.1rem;
      .card-rank {
        font-size: 0.8rem !important;
      }
      .card-suit {
        font-size: 0.6rem !important;
      }
    }

    .card-bottom-right {
      bottom: 0.1rem;
      right: 0.1rem;
      .card-rank {
        font-size: 0.8rem !important;
      }
      .card-suit {
        font-size: 0.6rem !important;
      }
    }

    &.joker-card {
      .joker-text {
        font-size: 0.35rem !important;
        line-height: 0.35rem;
        transform: none;
      }
      .joker-main-symbol {
        font-size: 1.2rem;
      }
    }
  }

  // Joker ä¸“ç”¨æ ·å¼
  &.joker-card {
    .joker-text {
      font-size: 0.7rem;
      line-height: 0.7rem;
      color: inherit; // ç»§æ‰¿çº¢è‰²æˆ–é»‘è‰²
      display: flex;
      flex-direction: column;
      align-items: center;

      @media (max-width: 768px) {
        font-size: 0.7rem !important; // è¿›ä¸€æ­¥ç¼©å°å­—ä½“
        line-height: 0.7rem; // ç´§å‡‘è¡Œé«˜
        font-weight: normal; // ç§»é™¤åŠ ç²—ï¼Œå‡å°‘è§†è§‰åšé‡æ„Ÿ
        transform: scale(0.85); // è¿›ä¸€æ­¥ç¼©å°ç¼©æ”¾æ¯”ä¾‹
      }
    }

    .joker-main-symbol {
      font-size: 3.5rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      line-height: 1;

      @media (max-width: 768px) {
        font-size: 1.8rem;
      }
    }
  }

  &.small {
    width: @card-width-small;
    height: @card-height-small;

    .card-suit {
      font-size: 0.625rem;
    }
    .card-rank {
      font-size: 1rem;
    }
    .joker-main-symbol {
      font-size: 1rem;
    }
    .joker-text {
      font-size: 0.5rem !important;
      line-height: 0.5rem;
      transform: scale(1);
    }
  }

  &.red {
    color: @color-card-red;
  }
  &.black {
    color: @color-card-black;
  }
  &.joker {
    color: @color-joker;
  }

  &.selected {
    background: #fff; // é€‰ä¸­ä¹Ÿä¿æŒç™½è‰²èƒŒæ™¯ï¼Œé è¾¹æ¡†å’Œé˜´å½±åŒºåˆ†
    border-color: @color-primary;
    transform: translateY(-0.75rem);
  }

  &.selectable {
    cursor: pointer;
    &:hover {
      border-color: @color-border-active;
      transform: translateY(-0.25rem);
    }
    &.selected:hover {
      transform: translateY(-0.75rem);
    }
  }

  // ç§»åŠ¨ç«¯é€‚é…
  @media (max-width: 768px) {
    width: 3.5rem;
    height: 5rem;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.5rem;
      }
      .card-suit {
        font-size: 1rem;
      }
    }

    .joker-symbol {
      font-size: 1.8rem;
    }
  }

  // ç§»åŠ¨ç«¯å°å±é€‚é…
  @media (max-width: 500px) {
    width: 3.2rem;
    height: 4.5rem;
    border-width: 1px;
    border-radius: 0.3rem;
    padding: 0.15rem;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.2rem;
      }
      .card-suit {
        font-size: 0.8rem;
      }
    }

    .joker-symbol {
      font-size: 1.5rem;
      margin-top: 0.5rem;
    }
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .game-title {
    font-size: 2rem;
  }

  .btn-landlord,
  .btn-pass {
    font-size: 1rem;
    padding: 0.5rem 1.5rem;
  }

  .table-area {
    min-height: 10rem;
    padding: 1rem;

    .table-title {
      font-size: 1rem;
    }
  }

  .player-hand {
    padding: 1rem 0.5rem;

    .hand-title {
      font-size: 1rem;
    }
  }

  // è°ƒæ•´ç§»åŠ¨ç«¯æŒ‰é’®å¤§å°
  .btn {
    padding: 0.5rem 1.5rem;
    font-size: 0.9rem;
  }
}

.btn {
  padding: 0.6rem 2rem;
  border-radius: 2rem;
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: all @transition-fast;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  top: 0;

  &:active {
    top: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  &:disabled {
    background: #4b5563 !important;
    color: #9ca3af !important;
    cursor: not-allowed;
    box-shadow: none;
    top: 0;
  }

  &.btn-blue {
    background: linear-gradient(to bottom, #3b82f6, #2563eb);
    color: white;
    border-bottom: 3px solid #1d4ed8;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-red {
    background: linear-gradient(to bottom, #ef4444, #dc2626);
    color: white;
    border-bottom: 3px solid #b91c1c;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-purple {
    background: linear-gradient(to bottom, #a855f7, #9333ea);
    // border: 1px solid #7e22ce;
    color: white;
    box-shadow: 0 4px 0 #6b21a8;

    &:hover {
      background: linear-gradient(to bottom, #b96bf9, #a855f7);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(2px);
      box-shadow: 0 1px 0 #6b21a8;
    }
  }
}

// Played Cards Areas
.played-cards-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; // Allow clicks to pass through to table/cards
  z-index: 20;
}

.played-cards-area {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  z-index: 20;
  pointer-events: none;

  // 1
  &.pos-0 {
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
  }

  // 2
  &.pos-1 {
    top: 50%;
    left: 14%;
    transform: translateY(-50%);
    flex-direction: row-reverse; // Cards flow inwards
  }

  // 3
  &.pos-2 {
    top: 24%;
    left: 50%;
    transform: translateX(-50%);
  }

  // 4
  &.pos-3 {
    top: 50%;
    right: 14%;
    transform: translateY(-50%);
  }

  .pass-text {
    background: rgba(255, 255, 255, 0.929);
    color: black;
    padding: 0.5rem 1.5rem;
    border-radius: 1rem;
    font-size: 1.2rem;
    font-weight: bold;
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  }

  .played-card-group {
    display: flex;
    // Overlap handling for played cards

    .card {
      margin-left: -30px; // Overlap
      transform-origin: center;

      &:first-child {
        margin-left: 0;
      }

      &.small {
        transform: scale(0.85);
      }
    }
  }
}

// å“åº”å¼æŒ‰é’®è°ƒæ•´
@media (max-width: 768px) {
  .button-group {
    &.top-right,
    &.top-left {
      top: 0.5rem;

      .btn {
        padding: 0.4rem 1rem;
        font-size: 0.9rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }
    }

    &.top-right {
      right: 0.5rem;
    }

    &.top-left {
      left: 0.5rem;
      gap: 0.5rem; // Reduce gap for vertical layout
    }
  }
}

@media (max-width: 500px) {
  .button-group {
    &.top-right,
    &.top-left {
      transform: scale(0.85); // Further reduce size on very small screens
      transform-origin: top center;
    }

    &.top-left {
      transform-origin: top left;
    }

    &.top-right {
      transform-origin: top right;
    }
  }
}

// è¿›è´¡åŒºåŸŸæ ·å¼
.tribute-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
}

.tribute-row {
  background: rgba(0, 0, 0, 0.5);
  padding: 8px;
  border-radius: 8px;
  display: flex;
  gap: 10px;
  align-items: center;
}

.tribute-card-preview {
  transform: scale(0.6);
  margin: -20px -10px;
}

.tribute-jokers-preview {
  display: flex;
  transform: scale(0.6);
  margin: -20px -10px;
}

.tribute-status {
  &.pending {
    color: #ff9800;
  }

  &.done {
    color: #4caf50;
  }
}

// å³ä¸Šè§’æŒ‰é’®ç»„é—´è·
.btn-margin-bottom {
  margin-bottom: 0.1rem;
}

// æµ‹è¯•æŠ—è´¡æŒ‰é’®ç‰¹æ®Šæ ·å¼
.btn-test {
  font-size: 0.8rem;
  padding: 0.4rem 1rem;
}

// å°å±å¹•æ‰‹ç‰Œç¬¬äºŒè¡Œ
.hand-cards-second-row {
  margin-top: -6rem;
}
