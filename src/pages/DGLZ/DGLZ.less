@import "../../variables.less";

// ÂÖ®Â±ÄÈáçÁΩÆÔºåÁ°Æ‰øù padding ‰∏ç‰ºöÊíëÂºÄÂÆπÂô®ÂÆΩÂ∫¶
*,
*::before,
*::after {
  box-sizing: border-box;
}

// Á°Æ‰øùÁà∂Á∫ßËäÇÁÇπ‰πüÊòØÂÖ®Â±èÈ´òÂ∫¶
html,
body,
#root {
  margin: 0;
  padding: 0;
  width: 100%;
  min-height: 100vh;
  overflow-x: hidden; // Èò≤Ê≠¢Â∑¶Âè≥ÊôÉÂä®
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

// Ê∏∏ÊàèÂÆπÂô®
.game-container-dglz {
  min-height: 100vh;
  width: 100%;
  background: radial-gradient(
    circle at center,
    @color-background-dglz-light 0%,
    @color-background-dglz 100%
  );
  padding: 1rem;
  color: @color-text-light;
  display: flex;
  flex-direction: column;

  // Âç°ËÉåÈ¢úËâ≤ - ËìùËâ≤Á≥ª
  --card-back-gradient: linear-gradient(135deg, #1e40af 0%, #312e81 100%);
}

.game-wrapper {
  max-width: 100vw;
  margin: 0 auto;
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
}

// Ê†áÈ¢ò
.game-title {
  font-size: 3rem;
  font-weight: 800;
  color: #fbbf24; // ÈáëËâ≤Ê†áÈ¢ò
  text-align: center;
  margin-bottom: 0.5rem;
  text-shadow: @shadow-text;
  letter-spacing: 2px;
}

// ËßÑÂàôÊåâÈíÆ
.btn-rules {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 100;
  background: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: bold;
  backdrop-filter: blur(4px);
  transition: all 0.3s;

  &:hover {
    background: rgba(0, 0, 0, 0.6);
    transform: scale(1.05);
  }

  .icon {
    font-size: 1.2rem;
  }
}

// ËßÑÂàôÂ∞èÊåâÈíÆ (Ê∏∏Êàè‰∏≠)
.btn-rules-icon {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 100;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #fff;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.2rem;
  backdrop-filter: blur(4px);
  transition: all 0.3s;

  &:hover {
    background: rgba(0, 0, 0, 0.5);
    transform: scale(1.1);
  }
}

// ÁßØÂàÜË°®
.scoreboard-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  z-index: 2000;
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(8px);

  .modal-content {
    background: linear-gradient(135deg, #2e1065 0%, #4c1d95 100%);
    width: 90%;
    max-width: 800px;
    border-radius: 1.5rem;
    padding: 2rem;
    position: relative;
    border: 2px solid rgba(167, 139, 250, 0.3);
    box-shadow:
      0 20px 50px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(255, 255, 255, 0.1) inset;
    animation: modal-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    display: flex;
    flex-direction: column;
    max-height: 90vh;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 1rem;

    h2 {
      margin: 0;
      color: #fff;
      font-size: 1.8rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
  }

  .score-table-container {
    overflow-x: auto;
    margin-bottom: 1.5rem;
    border-radius: 0.5rem;
    background: rgba(0, 0, 0, 0.3);
    padding: 1rem;

    table {
      width: 100%;
      border-collapse: collapse;
      color: #fff;
      min-width: 600px;

      th,
      td {
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 0.75rem 1rem;
        text-align: center;
        white-space: nowrap;
      }

      th {
        background: rgba(139, 92, 246, 0.3);
        font-weight: bold;
        color: #ddd6fe;
      }

      td {
        font-family: monospace;
        font-size: 1.1rem;
      }

      // Á¨¨‰∏ÄÂàóÊ†∑Âºè (Ê†áÈ¢òÂàó)
      tr td:first-child {
        background: rgba(0, 0, 0, 0.4);
        font-weight: bold;
        color: #f3f4f6;
        position: sticky;
        left: 0;
        z-index: 10;
      }

      tr th:first-child {
        position: sticky;
        left: 0;
        z-index: 10;
        background: rgba(109, 40, 217, 0.9); // darker purple
      }
    }
  }

  .close-btn {
    align-self: center;
    padding: 0.4rem 1.2rem;
    font-size: 1rem;
    white-space: nowrap;
  }
}

@keyframes modal-pop {
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

// Ê∂àÊÅØÊ°Ü (Toast È£éÊ†º)
.message-box-dglz {
  position: fixed;
  bottom: 24%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 50;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 2rem;
  padding: 0.75rem 2rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  pointer-events: none; // ÂÖÅËÆ∏ÁÇπÂáªÁ©øÈÄè
  text-align: center;
  transition: all 0.3s ease;
  min-width: 200px;

  .message-text {
    font-size: clamp(0.5rem, 3vw, 1.2rem);
    font-weight: 600;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    margin: 0;
  }
}

// ÊåâÈíÆÁªÑ
.button-group {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1rem;

  &.top-right {
    position: absolute;
    top: 1rem;
    right: 1rem;
    margin: 0;
    z-index: 100;
  }
}

// ÊåâÈíÆÊ†∑Âºè
.btn {
  padding: 0.6rem 2rem;
  border-radius: 2rem; // ÂúÜËßíÊåâÈíÆ
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: all @transition-fast;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  top: 0;

  &:active {
    top: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  &:disabled {
    background: #4b5563 !important;
    color: #9ca3af !important;
    cursor: not-allowed;
    box-shadow: none;
    top: 0;
  }

  &.btn-primary {
    background: linear-gradient(to bottom, #3b82f6, #2563eb);
    color: white;
    border-bottom: 3px solid #1d4ed8;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-landlord {
    background: linear-gradient(to bottom, #f59e0b, #d97706);
    color: white;
    font-size: 1.25rem;
    padding: 0.75rem 2.5rem;
    border-bottom: 3px solid #b45309;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-pass {
    background: linear-gradient(to bottom, #6b7280, #4b5563);
    color: white;
    font-size: 1.25rem;
    padding: 0.75rem 2.5rem;
    border-bottom: 3px solid #374151;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-play {
    background: linear-gradient(to bottom, #22c55e, #16a34a);
    color: white;
    border-bottom: 3px solid #15803d;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-pass-card {
    background: linear-gradient(to bottom, #ea580c, #fe4406);
    color: white;
    border-bottom: 3px solid #c2410c;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-home {
    background: transparent;
    color: #1f2937;
    border-bottom: none;
    box-shadow: none;
    z-index: 1;

    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background: white;
      border-radius: 2rem;
      z-index: -1;
    }

    &::after {
      content: "";
      position: absolute;
      inset: 0;
      bottom: -3px;
      background: linear-gradient(135deg, #fee2e2, #dcfce7, #dbeafe);
      border-radius: 2rem;
      z-index: -2;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    &:active {
      top: 2px;
      &::after {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }
    }

    &:hover:not(:disabled) {
      filter: brightness(0.98);
    }
  }
}

// Â∫ïÁâåÂå∫Âüü
.base-cards-section {
  display: flex;
  justify-content: center;
  margin-bottom: 1rem;
}

.base-cards-panel {
  background: rgba(0, 0, 0, 0.3);
  border-radius: @border-radius-large;
  padding: 0.75rem 1.5rem;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);

  .panel-title {
    font-weight: bold;
    color: #fbbf24;
    margin-bottom: 0.5rem;
    text-align: center;
    font-size: 1rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  .base-cards-container {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
  }

  .card-placeholder {
    width: @card-width-small;
    height: @card-height-small;
    border-radius: @border-radius;
    border: 2px dashed rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
  }

  // Â∫ïÁâå‰ΩøÁî®Â∞èÂ∞∫ÂØ∏
  .card {
    width: @card-width-small;
    height: @card-height-small;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.2rem;
      }
      .card-suit {
        font-size: 0.8rem;
      }
    }
    .joker-main-symbol {
      font-size: 0.8rem !important;
    }
    .joker-text {
      font-size: 0.5rem !important;
      line-height: 0.5rem !important;
    }
  }
}

// ‰∏ªÊ∏∏ÊàèÂå∫ÂüüÂ∏ÉÂ±Ä
.game-area {
  position: relative;
  display: flex;
  align-items: center; // ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 0;
  width: 100%;
  flex: 1;

  @media (max-width: 768px) {
    flex-direction: row; // ÁßªÂä®Á´ØÊîπ‰∏∫Ë°åÂ∏ÉÂ±ÄÔºåÂÖÅËÆ∏Êç¢Ë°å
    flex-wrap: nowrap; // ‰∏çÊç¢Ë°å
    align-items: center;
    justify-content: space-between;
    gap: 0.25rem;
  }
}

// ‰æßËæπÁé©ÂÆ∂
.side-player {
  flex: 0 0 140px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  &.left {
    order: 1;
    @media (max-width: 768px) {
      order: 1;
      flex: 0 0 auto; // ÁßªÂä®Á´ØËá™ÈÄÇÂ∫îÂÆΩÂ∫¶
      width: 25%; // ÈôêÂà∂ÂÆΩÂ∫¶
      max-width: 90px;
      padding: 0;
      flex-direction: column; // ‰øùÊåÅÂûÇÁõ¥ÊéíÂàóÔºåÊõ¥Á¥ßÂáë
      margin-bottom: 0;
    }
  }

  &.right {
    order: 3;
    @media (max-width: 768px) {
      order: 3; // Âú®Âè≥‰æß
      flex: 0 0 auto;
      width: 25%;
      max-width: 90px;
      padding: 0;
      flex-direction: column;
      margin-bottom: 0;
    }
  }

  @media (max-width: 768px) {
    width: auto;
    margin-bottom: 0;
  }
}

// ‰∏≠Èó¥Âå∫Âüü
.center-area {
  flex: 1;
  min-width: 0;
  z-index: 1;
  order: 2;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;

  @media (max-width: 768px) {
    order: 2; // Âú®‰∏≠Èó¥
    flex: 1; // Âç†ÊçÆÂâ©‰ΩôÁ©∫Èó¥
    width: auto;
    justify-content: center;
    padding-top: 0;
    margin: 0 0.25rem;
  }
}

// Áé©ÂÆ∂‰ø°ÊÅØÂç°Áâá (Â§¥ÂÉèÊ†∑Âºè)
.player-info {
  background: rgba(0, 0, 0, 0.6);
  border-radius: 1rem;
  padding: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  transition: all @transition-fast;
  width: 100%;
  text-align: center;
  border: 2px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(4px);
  position: relative;

  &.landlord {
    border-color: #ef4444 !important; // Á∫¢Ëâ≤ËæπÊ°Ü
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.5); // Á∫¢Ëâ≤ÂÖâÊôï

    &::after {
      content: "üëë";
      position: absolute;
      top: -15px;
      right: -10px;
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    }
  }

  &.active {
    border-color: #f9fafb;
    box-shadow: 0 0 18px rgba(255, 255, 255, 0.9);
    background: rgba(0, 0, 0, 0.8);
  }

  .player-name {
    font-weight: bold;
    color: #fff;
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  }

  .player-cards-count {
    color: #fbbf24;
    font-size: 0.9rem;
    margin: 0;
    font-weight: bold;
    background: rgba(0, 0, 0, 0.3);
    padding: 0.2rem 0.5rem;
    border-radius: 1rem;
    display: inline-block;
  }

  .player-stats {
    display: block;
    color: #e5e7eb;
    font-size: 0.85rem;
    margin-top: 0.3rem;
    opacity: 0.9;
    font-weight: normal;
  }

  .remaining-cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px dashed rgba(255, 255, 255, 0.2);
    gap: 2px;
    width: 100%;

    .card.mini {
      width: 1.5rem;
      height: 2.1rem;
      border-radius: 0.2rem;
      margin: 1px;
      padding: 0;
      border-width: 1px;

      .card-top-left {
        top: 0;
        left: 0.1rem;
        width: 100%;
        .card-rank {
          font-size: 0.7rem !important;
        }
        .card-suit {
          font-size: 0.6rem !important;
        }
      }

      .card-bottom-right {
        display: none; // Hide bottom right for space
      }

      .joker-main-symbol {
        font-size: 0.8rem !important;
      }

      &.joker-card .joker-text {
        font-size: 0.4rem !important;
      }
    }
  }

  @media (max-width: 768px) {
    width: 100%;
    min-width: 0;
    padding: 0.5rem 0.2rem;

    .player-name {
      font-size: 0.8rem;
      margin-bottom: 0.2rem;
    }

    .player-cards-count {
      font-size: 0.75rem;
      padding: 0.1rem 0.3rem;
    }

    &.landlord::after {
      font-size: 1.2rem;
      top: -10px;
      right: -5px;
    }
  }
}

// ÁâåÊ°åÂå∫Âüü (Âá∫ÁâåÂ±ïÁ§∫)
.table-area {
  // ÁßªÈô§ËÉåÊôØÔºåËÆ©ÁâåÁúãËµ∑Êù•Âú®Ê°åÈù¢‰∏ä
  background: transparent;
  border-radius: @border-radius-large;
  padding: 1rem;
  box-shadow: none;
  min-height: 12rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;

  .table-title {
    color: rgba(255, 255, 255, 0.5);
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;

    .game-stats-inline {
      margin-left: 0.8rem;
      font-size: 0.85em;
      color: #ffdc84;
      background: rgba(0, 0, 0, 0.4);
      padding: 0.2rem 0.6rem;
      border-radius: 0.5rem;
      text-transform: none;
      letter-spacing: normal;
      display: inline-block;
      vertical-align: middle;
    }
  }

  .table-info {
    color: #fbbf24;
    text-align: center;
    margin-bottom: 1rem;
    font-size: 1.1rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    background: rgba(0, 0, 0, 0.4);
    padding: 0.3rem 1rem;
    border-radius: 1rem;
  }

  .table-cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1cqw;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.05); // ÂæÆÂæÆÂèë‰∫ÆÁöÑÂå∫ÂüüË°®Á§∫Âá∫ÁâåÂå∫
    border-radius: 1rem;
    border: 1px dashed rgba(255, 255, 255, 0.1);

    // ÂêØÁî®ÂÆπÂô®Êü•ËØ¢Ôºå‰ΩøÂç°ÁâåÈöèÁà∂ÂÆπÂô®ÂÆΩÂ∫¶Áº©Êîæ
    container-type: inline-size;
    width: 90%;
    height: 90%;
    margin-left: -1rem;

    @media (max-width: 768px) {
      width: 90%;
      height: 300%;
      margin-left: 0;
    }

    // Âä®ÊÄÅÊØî‰æã
    --card-scale: 1;
    &.scale-large {
      --card-scale: 1.35;
    }
    &.scale-medium {
      --card-scale: 1;
    }
    &.scale-small {
      --card-scale: 0.75;
    }

    .card {
      // ÂêØÁî®ÂÆπÂô®Êü•ËØ¢Ôºå‰ΩøÂÜÖÈÉ®ÂÖÉÁ¥†ÈöèÂç°ÁâåËá™Ë∫´ÂÆΩÂ∫¶Áº©Êîæ
      container-type: inline-size;

      // ÂÆö‰πâËÆ°ÁÆóÂêéÁöÑÂÆûÈôÖÂÆΩÂ∫¶ÂèòÈáè
      // ÂÆΩÂ∫¶ËÆ°ÁÆóÔºöÂÆπÂô®ÂÆΩÂ∫¶ÁöÑ 12% * Áº©ÊîæÁ≥ªÊï∞
      // ÈôêÂà∂ÔºöÊúÄÂ∞è 3.25rem (‰øùËØÅÈ´òÂ∫¶>4.5rem)ÔºåÊúÄÂ§ß 5rem
      // ‰ΩøÁî® ~"" ÈÅøÂÖç Less ÁºñËØëÈîôËØØ
      --final-width: clamp(3.25rem, calc(~"12cqw * var(--card-scale)"), 5rem);

      width: var(--final-width);

      // ‰øùÊåÅ 5:7 ÁöÑÂÆΩÈ´òÊØî
      height: auto;
      aspect-ratio: 5 / 7;
      min-height: 4.5rem;
      max-height: 7rem;

      // Ëá™Ë∫´Â±ûÊÄßÂøÖÈ°ª‰ΩøÁî®ÂèòÈáèËÆ°ÁÆó (Âõ†‰∏∫ cqw Ê≠§Êó∂ÊåáÂêëÁà∂ÂÆπÂô®)
      // Á≥ªÊï∞ = ÂéüÊï∞ÂÄº / 12

      border-radius: calc(~"var(--final-width) * 0.1"); // 1.2 / 12
      border-width: calc(~"var(--final-width) * 0.0167"); // 0.2 / 12

      // margin ‰πüË∑üÈöèÂç°ÁâåÂ∞∫ÂØ∏Áº©Êîæ
      margin: calc(~"var(--final-width) * 0.0167");

      padding: calc(~"var(--final-width) * 0.05"); // 0.6 / 12

      // 0.5/12 = 0.0417, 1/12 = 0.0833
      box-shadow: 0 calc(~"var(--final-width) * 0.0417")
        calc(~"var(--final-width) * 0.0833") rgba(0, 0, 0, 0.2);

      // ÂÜÖÈÉ®Â≠êÂÖÉÁ¥†ÂèØ‰ª•‰ΩøÁî® cqw (Áõ∏ÂØπ‰∫é .card Ëá™Ë∫´)
      // Êï∞ÂÄº = (ÂéüÊï∞ÂÄº / 12) * 100
      .card-top-left {
        top: 4.16cqw; // 0.5 / 12
        left: 4.16cqw;
        width: 30cqw; // 3.6 / 12

        .card-rank {
          font-size: 40cqw;
        } // 4.8 / 12
        .card-suit {
          font-size: 35.83cqw;
        } // 4.3 / 12
      }

      .card-bottom-right {
        bottom: 4.16cqw;
        right: 4.16cqw;

        .card-rank {
          font-size: 40cqw;
        }
        .card-suit {
          font-size: 35.83cqw;
        }
      }

      // Joker ÁâπÊÆäÂ§ÑÁêÜ
      &.joker-card {
        .joker-text {
          font-size: 14.16cqw; // 1.7 / 12
          line-height: 14.16cqw;
        }
        .joker-main-symbol {
          font-size: 70cqw; // 8.4 / 12
        }
      }
    }
  }

  .table-empty {
    color: rgba(255, 255, 255, 0.3);
    text-align: center;
    padding: 2rem 0;
    font-size: 1.125rem;
    font-style: italic;
  }
}

// Áé©ÂÆ∂ÊâãÁâåÂå∫Âüü
.player-hand {
  // ÁßªÈô§ÊâãÁâåÂå∫ÂüüÊ∏êÂèòËÉåÊôØÔºåÊîπ‰∏∫Áªü‰∏ÄÁöÑÂçäÈÄèÊòéËÉåÊôØ
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(8px);
  border-radius: 1rem;
  padding: 1.5rem 1rem 0.5rem 1rem;
  box-shadow: none;
  position: sticky;
  bottom: 0;
  width: 100%;
  margin-top: auto; // Êé®Âà∞Â∫ïÈÉ®
  border: 2px solid rgba(255, 255, 255, 0.1); // Âü∫Á°ÄËæπÊ°Ü

  &.landlord {
    border-color: #ef4444; // Á∫¢Ëâ≤ËæπÊ°Ü
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.5); // Á∫¢Ëâ≤ÂÖâÊôï

    &::after {
      content: "üëë";
      position: absolute;
      top: -28px;
      right: -18px;
      font-size: 2rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    }
  }

  &.active {
    border-color: #f9fafb;
    box-shadow: 0 0 18px rgba(255, 255, 255, 0.9);
  }

  .hand-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;

    .hand-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
      margin: 0;
      display: flex;
      align-items: center;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      white-space: nowrap;
      height: 3rem;

      .player-stats-inline {
        margin-left: 0.8rem;
        font-size: 0.8em;
        color: #9ca3af;
        font-weight: normal;
        background: rgba(0, 0, 0, 0.3);
        padding: 0.1rem 0.5rem;
        border-radius: 0.5rem;
        vertical-align: middle;
      }
    }

    .button-group {
      margin-bottom: 0;
    }
  }

  .hand-cards-scroll-container {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 0.5rem;
    -webkit-overflow-scrolling: touch;

    &::-webkit-scrollbar {
      height: 6px;
    }
    &::-webkit-scrollbar-track {
      background: transparent;
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      &:hover {
        background: rgba(255, 255, 255, 0.5);
      }
    }
  }

  .hand-cards {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    align-items: center;
    padding-top: 2rem; // Â¢ûÂä†È°∂ÈÉ®ÂÜÖËæπË∑ùÔºåÈò≤Ê≠¢ÈÄâ‰∏≠Âç°Áâå‰∏äÊµÆË¢´ÈÅÆÊå°
    min-height: 9rem;
    padding-bottom: 1rem;
    width: max-content;
    min-width: 100%;

    .card {
      margin: 0;
      margin-left: -2.5rem; // Ë∞ÉÊï¥Ë¥üËæπË∑ùÔºåÁ°Æ‰øùÂÜÖÂÆπÂèØËßÅ
      box-shadow: -2px 0 4px rgba(0, 0, 0, 0.3); // Âä†Ê∑±Èò¥ÂΩ±
      transition:
        transform 0.3s cubic-bezier(0.33, 1, 0.68, 1),
        margin 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s ease;

      &:first-child {
        margin-left: 0;
      }

      // ÂÆö‰πâÈÄâ‰∏≠Áä∂ÊÄÅ‰ΩçÁßªÂèòÈáè
      --selected-offset: -1.5rem;

      // ÊÇ¨ÂÅúÊïàÊûú (‰ªÖÂú®ÊîØÊåÅÊÇ¨ÂÅúÁöÑËÆæÂ§á‰∏äÂêØÁî®)
      @media (hover: hover) {
        &:hover {
          transform: translateY(-1rem);
          box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
          // z-index: 100;
        }
      }

      // ÈÄâ‰∏≠Áä∂ÊÄÅ
      &.selected {
        transform: translateY(var(--selected-offset));
        box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); // ÈáëËâ≤ÂÖâÊôï
        border-color: #fbbf24;
      }

      // ÈÄâ‰∏≠‰∏îÊÇ¨ÂÅú (‰ªÖÂú®ÊîØÊåÅÊÇ¨ÂÅúÁöÑËÆæÂ§á‰∏äÂêØÁî®)
      @media (hover: hover) {
        &.selected:hover {
          transform: translateY(var(--selected-offset));
        }
      }

      // ÂìçÂ∫îÂºèÔºö‰ªÖË∞ÉÊï¥ËæπË∑ù
      @media (max-width: 768px) {
        margin-left: -1.8rem;
      }

      // Ë∂ÖÂ∞èÂ±èÂπïÈÄÇÈÖç
      @media (max-width: 500px) {
        margin-left: -1.8rem; // ‰øùÊåÅÈáçÂè†Â∫¶
        --selected-offset: -0.8rem; // Ë∞ÉÊï¥ÁßªÂä®Á´ØÈÄâ‰∏≠‰ΩçÁßª

        &:first-child {
          margin-left: 0;
        }

        &.selected {
          // transform Áî±ÂèòÈáèÊéßÂà∂
          box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); // ‰øùÊåÅÈÄâ‰∏≠ÂÖâÊôï
        }
      }

      // Ëß¶Êë∏ËÆæÂ§áÈÄÇÈÖç (Á¶ÅÁî®ÊÇ¨ÂÅú)
      @media (hover: none), (pointer: coarse) {
        &:hover {
          transform: translateY(0); // ÊòéÁ°ÆËÆæÁΩÆ‰∏∫ 0
          box-shadow: -2px 0 4px rgba(0, 0, 0, 0.3); // ÊÅ¢Â§çÈªòËÆ§Èò¥ÂΩ±
        }

        &.selected:hover {
          transform: translateY(var(--selected-offset)); // ‰øùÊåÅÈÄâ‰∏≠Áä∂ÊÄÅ‰ΩçÁßª
          box-shadow: 0 0 10px rgba(251, 191, 36, 0.6); // ‰øùÊåÅÈÄâ‰∏≠ÂÖâÊôï
        }
      }
    }
  }
}

@keyframes pulse {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    opacity: 1;
  }
}

// Âç°ÁâåÊ†∑Âºè
.card {
  position: relative;
  display: inline-block;
  width: @card-width;
  height: @card-height;
  border-radius: @border-radius;
  border: 1px solid #d1d5db; // Êõ¥ÁªÜÁöÑËæπÊ°Ü
  margin: 0.125rem;
  transition: all @transition-fast;
  flex-shrink: 0; // Èò≤Ê≠¢Âç°ÁâåÂú®Á©∫Èó¥‰∏çË∂≥Êó∂ÂèòÂΩ¢

  // Áªü‰∏ÄÈ£éÊ†º
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  padding: 0.25rem;
  background: @color-card-bg;
  box-shadow: @shadow-card;
  font-weight: bold;
  cursor: default;
  user-select: none; // Á¶ÅÊ≠¢ÊñáÊú¨ÈÄâ‰∏≠
  -webkit-user-select: none; // Safari/ChromeÂÖºÂÆπ

  // ÂÜÖÈÉ®ÂÖÉÁ¥†Ê†∑Âºè
  .card-top-left {
    position: absolute;
    top: 0.2rem;
    left: 0.2rem;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 1.5rem;

    @media (max-width: 500px) {
      width: 1rem;
    }

    .card-rank {
      font-size: 2rem;
      line-height: 1;
      font-family: "Times New Roman", serif; // Êõ¥ÊúâÊâëÂÖãÊÑü

      @media (max-width: 500px) {
        font-size: 1.2rem;
      }
    }
    .card-suit {
      font-size: 1.8rem;
      line-height: 1;

      @media (max-width: 500px) {
        font-size: 0.8rem;
      }
    }
  }

  .card-bottom-right {
    position: absolute;
    bottom: 0.2rem;
    right: 0.2rem;
    transform: rotate(180deg);
    display: flex;
    flex-direction: column;
    align-items: flex-start;

    @media (max-width: 500px) {
      bottom: 0.1rem;
      right: 0.1rem;
    }

    .card-rank {
      font-size: 2rem;
      line-height: 1;
      font-family: "Times New Roman", serif;

      @media (max-width: 500px) {
        font-size: 1.2rem;
      }
    }
    .card-suit {
      font-size: 1.8rem;
      line-height: 1;

      @media (max-width: 500px) {
        font-size: 0.8rem;
      }
    }
  }

  // Mini card style for rules
  &.mini {
    width: 2.5rem;
    height: 3.5rem;
    border-radius: 0.25rem;
    padding: 0.1rem;
    margin: 0.1rem;
    border-width: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);

    .card-top-left {
      width: 0.8rem;
      top: 0.1rem;
      left: 0.1rem;
      .card-rank {
        font-size: 0.8rem !important;
      }
      .card-suit {
        font-size: 0.6rem !important;
      }
    }

    .card-bottom-right {
      bottom: 0.1rem;
      right: 0.1rem;
      .card-rank {
        font-size: 0.8rem !important;
      }
      .card-suit {
        font-size: 0.6rem !important;
      }
    }

    &.joker-card {
      .joker-text {
        font-size: 0.35rem !important;
        line-height: 0.35rem;
        transform: none;
      }
      .joker-main-symbol {
        font-size: 1.2rem;
      }
    }
  }

  // Joker ‰∏ìÁî®Ê†∑Âºè
  &.joker-card {
    .joker-text {
      font-size: 0.7rem;
      line-height: 0.7rem;
      color: inherit; // ÁªßÊâøÁ∫¢Ëâ≤ÊàñÈªëËâ≤
      display: flex;
      flex-direction: column;
      align-items: center;

      @media (max-width: 768px) {
        font-size: 0.7rem !important; // Ëøõ‰∏ÄÊ≠•Áº©Â∞èÂ≠ó‰Ωì
        line-height: 0.7rem; // Á¥ßÂáëË°åÈ´ò
        font-weight: normal; // ÁßªÈô§Âä†Á≤óÔºåÂáèÂ∞ëËßÜËßâÂéöÈáçÊÑü
        transform: scale(0.85); // Ëøõ‰∏ÄÊ≠•Áº©Â∞èÁº©ÊîæÊØî‰æã
      }
    }

    .joker-main-symbol {
      font-size: 3.5rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      line-height: 1;

      @media (max-width: 768px) {
        font-size: 1.8rem;
      }
    }
  }

  &.small {
    width: @card-width-small;
    height: @card-height-small;

    .card-suit {
      font-size: 0.625rem;
    }
    .card-rank {
      font-size: 1rem;
    }
    .joker-main-symbol {
      font-size: 1rem;
    }
    .joker-text {
      font-size: 0.5rem !important;
      line-height: 0.5rem;
      transform: scale(1);
    }
  }

  &.red {
    color: @color-card-red;
  }
  &.black {
    color: @color-card-black;
  }
  &.joker {
    color: @color-joker;
  }

  &.selected {
    background: #fff; // ÈÄâ‰∏≠‰πü‰øùÊåÅÁôΩËâ≤ËÉåÊôØÔºåÈù†ËæπÊ°ÜÂíåÈò¥ÂΩ±Âå∫ÂàÜ
    border-color: @color-primary;
    transform: translateY(-0.75rem);
  }

  &.selectable {
    cursor: pointer;
    &:hover {
      border-color: @color-border-active;
      transform: translateY(-0.25rem);
    }
    &.selected:hover {
      transform: translateY(-0.75rem);
    }
  }

  // ÁßªÂä®Á´ØÈÄÇÈÖç
  @media (max-width: 768px) {
    width: 3.5rem;
    height: 5rem;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.5rem;
      }
      .card-suit {
        font-size: 1rem;
      }
    }

    .joker-symbol {
      font-size: 1.8rem;
    }
  }

  // ÁßªÂä®Á´ØÂ∞èÂ±èÈÄÇÈÖç
  @media (max-width: 500px) {
    width: 3.2rem;
    height: 4.5rem;
    border-width: 1px;
    border-radius: 0.3rem;
    padding: 0.15rem;

    .card-top-left,
    .card-bottom-right {
      .card-rank {
        font-size: 1.2rem;
      }
      .card-suit {
        font-size: 0.8rem;
      }
    }

    .joker-symbol {
      font-size: 1.5rem;
      margin-top: 0.5rem;
    }
  }
}

// ÂìçÂ∫îÂºèËÆæËÆ°
@media (max-width: 768px) {
  .game-title {
    font-size: 2rem;
  }

  .btn-landlord,
  .btn-pass {
    font-size: 1rem;
    padding: 0.5rem 1.5rem;
  }

  .table-area {
    min-height: 10rem;
    padding: 1rem;

    .table-title {
      font-size: 1rem;
    }
  }

  .player-hand {
    padding: 1rem 0.5rem;

    .hand-title {
      font-size: 1rem;
    }
  }

  // Ë∞ÉÊï¥ÁßªÂä®Á´ØÊåâÈíÆÂ§ßÂ∞è
  .btn {
    padding: 0.5rem 1.5rem;
    font-size: 0.9rem;
  }
}

// ÔøΩÔøΩ≈•ÔøΩÔøΩ Ω
.btn {
  padding: 0.6rem 2rem;
  border-radius: 2rem;
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: all @transition-fast;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  top: 0;

  &:active {
    top: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  &:disabled {
    background: #4b5563 !important;
    color: #9ca3af !important;
    cursor: not-allowed;
    box-shadow: none;
    top: 0;
  }

  &.btn-blue {
    background: linear-gradient(to bottom, #3b82f6, #2563eb);
    color: white;
    border-bottom: 3px solid #1d4ed8;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-red {
    background: linear-gradient(to bottom, #ef4444, #dc2626);
    color: white;
    border-bottom: 3px solid #b91c1c;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
    }
  }

  &.btn-purple {
    background: linear-gradient(to bottom, #a855f7, #9333ea);
    // border: 1px solid #7e22ce;
    color: white;
    box-shadow: 0 4px 0 #6b21a8;

    &:hover {
      background: linear-gradient(to bottom, #b96bf9, #a855f7);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(2px);
      box-shadow: 0 1px 0 #6b21a8;
    }
  }

  &.btn-start {
    background: linear-gradient(to bottom, #22c55e, #16a34a);
    color: white;
    font-size: 1.5rem;
    padding: 1rem 3rem;
    border-bottom: 4px solid #15803d;

    &:hover:not(:disabled) {
      filter: brightness(1.1);
      transform: scale(1.05);
    }
  }
}

// ============================================
// ÂÖ≠‰∫∫Ê∏∏ÊàèÂ∏ÉÂ±ÄÊ†∑Âºè
// ============================================

// Ê∂àÊÅØÊèêÁ§∫Ê†è
.message-bar {
  position: absolute;
  top: 5rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 50;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 2rem;
  padding: 0.5rem 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  text-align: center;

  span {
    font-size: 1rem;
    font-weight: 600;
    color: #fbbf24;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  @media (max-width: 768px) {
    top: 4rem;
    padding: 0.4rem 1rem;
    span {
      font-size: 0.85rem;
    }
  }
}

// Ê∏∏Êàè‰∏ªÂå∫Âüü
.game-area {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  width: 100%;
  flex: 1;
  min-height: 550px; // ‰øùÊåÅË∂≥Â§üÈ´òÂ∫¶‰ª•‰æøÂá∫ÁâåÂ±ïÁ§∫

  @media (max-width: 768px) {
    gap: 0.25rem;
    min-height: 0;
  }
}

// Âá∫ÁâåÂ±ïÁ§∫Âå∫Âüü (Ë¶ÜÁõñÂú®Ê∏∏ÊàèÂå∫Âüü‰πã‰∏ä)
.played-cards-container {
  position: absolute;
  inset: 0;
  z-index: 20;
  pointer-events: none;
}

// È°∂ÈÉ®ÁîµËÑëÁé©ÂÆ∂
.top-player {
  position: absolute;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(260px, 90%);
  z-index: 10;
}

// ‰æßËæπÁîµËÑëÁé©ÂÆ∂ (Â∑¶Âè≥)
.side-player {
  flex: 0 0 140px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: center; // Êîπ‰∏∫ center Âπ∂ÈÖçÂêà gap
  gap: 8rem; // Â¢ûÂä†Áé©ÂÆ∂‰πãÈó¥ÁöÑÈó¥Ë∑ù
  height: 100%;

  &.left {
    order: 1;
  }
  &.right {
    order: 3;
  }

  .side-player-item {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 768px) {
    flex: 0 0 80px;
  }
}

// ‰∏≠Èó¥Âç†ÊçÆÂâ©‰ΩôÁ©∫Èó¥
.center-area {
  flex: 1;
  min-width: 0;
  z-index: 1;
  order: 2;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;
}

// ÂêÑÁé©ÂÆ∂‰ΩçÁΩÆÁöÑÂá∫ÁâåÂå∫ (È°∫Êó∂Èíà: 0Â∫ï‚Üí1Â∑¶‰∏ã‚Üí2Â∑¶‰∏ä‚Üí3È°∂‚Üí4Âè≥‰∏ä‚Üí5Âè≥‰∏ã)
.played-cards-area-dglz {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 20;

  // Áé©ÂÆ∂0 - Â∫ïÈÉ®ÔºàËá™Â∑±Ôºâ
  &.pos-0 {
    bottom: 12%;
    left: 50%;
    transform: translateX(-50%);
  }

  // Áé©ÂÆ∂1 - Â∑¶‰∏ã
  &.pos-1 {
    bottom: 32%;
    left: 15%;
  }

  // Áé©ÂÆ∂2 - Â∑¶‰∏ä
  &.pos-2 {
    top: 32%;
    left: 15%;
  }

  // Áé©ÂÆ∂3 - È°∂ÈÉ®
  &.pos-3 {
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
  }

  // Áé©ÂÆ∂4 - Âè≥‰∏ä
  &.pos-4 {
    top: 32%;
    right: 15%;
  }

  // Áé©ÂÆ∂5 - Âè≥‰∏ã
  &.pos-5 {
    bottom: 32%;
    right: 15%;
  }
}

// ËøáÁâåÊñáÂ≠ó
.pass-text {
  background: rgba(255, 255, 255, 0.95);
  color: #000;
  padding: 0.5rem 1.5rem;
  border-radius: 1rem;
  font-weight: bold;
  font-size: 1.1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

// Âá∫ÁâåÂç°ÁâáÁªÑ
.played-card-group {
  display: flex;
  flex-direction: row;
  align-items: flex-end;
  gap: 0;

  > div {
    margin-left: -1rem;
    position: relative;

    &:first-child {
      margin-left: 0;
    }
  }

  .card {
    transform: none !important;
  }
}

// ÁîµËÑëÁé©ÂÆ∂Âç°Áâá
.computer-player {
  background: rgba(0, 0, 0, 0.5);
  border-radius: 1rem;
  padding: 0.75rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  border: 2px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(4px);
  transition: all 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;

  &.active {
    border-color: #fbbf24;
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.6);
    background: rgba(0, 0, 0, 0.7);
  }

  .player-info {
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0;
    width: 100%;
    text-align: center;

    .player-name {
      font-weight: bold;
      color: #fff;
      margin: 0 0 0.25rem 0;
      font-size: 0.9rem;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    }

    .cards-count {
      color: #fbbf24;
      font-size: 0.8rem;
      margin: 0;
      font-weight: bold;
    }
  }

  // ÁîµËÑëÁé©ÂÆ∂‰ΩçÁΩÆÊ†∑Âºè
  &.left-top,
  &.left-bottom,
  &.right-top,
  &.right-bottom {
    width: 100%;
  }

  &.top {
    width: auto;
    min-width: 140px;
    flex-direction: row;
    padding: 0.5rem 1rem;
    gap: 1rem;

    @media (max-width: 768px) {
      min-width: 100px;
      padding: 0.4rem 0.75rem;
      gap: 0.5rem;
    }
  }

  @media (max-width: 768px) {
    padding: 0.5rem;
    border-radius: 0.75rem;

    .player-info {
      .player-name {
        font-size: 0.75rem;
      }
      .cards-count {
        font-size: 0.7rem;
      }
    }
  }
}

// ÁâåËÉåÊ†∑Âºè
.card-backs {
  display: flex;
  gap: 2px;
  align-items: center;
}

.card-back {
  background: linear-gradient(135deg, #1e40af 0%, #312e81 100%);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 0.25rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;

  // ÁâåËÉåËä±Á∫π
  &::after {
    content: "‚ô†";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: rgba(255, 255, 255, 0.15);
    font-size: inherit;
  }

  &.mini {
    width: 1.2rem;
    height: 1.7rem;
    font-size: 0.6rem;

    @media (max-width: 768px) {
      width: 1rem;
      height: 1.4rem;
      font-size: 0.5rem;
    }
  }
}

.more-cards {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.7rem;
  font-weight: bold;
  margin-left: 0.25rem;
}

// Âá∫ÁâåÂå∫Âüü
.play-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  min-height: 150px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 1rem;
  border: 1px dashed rgba(255, 255, 255, 0.1);

  @media (max-width: 768px) {
    min-height: 100px;
  }
}

.played-cards-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.play-hint {
  color: rgba(255, 255, 255, 0.4);
  font-size: 1rem;
  font-weight: 500;
}
